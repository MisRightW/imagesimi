# 图像相似度中间件服务安装指南

## 系统要求
- Python 3.10
- 足够的磁盘空间用于安装依赖和模型文件

## 安装步骤

### 1. 创建并激活虚拟环境
```bash
# Windows系统
python -m venv venv
venv\Scripts\activate

# 或使用已有的虚拟环境
```

### 2. 安装PyTorch（重要：必须先安装）
根据您的系统选择合适的命令：

#### 对于支持CUDA的NVIDIA显卡：
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

#### 对于仅使用CPU的系统：
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu
```

### 3. 安装其他依赖
```bash
pip install -r requirements.txt
```

### 4. 启动服务
```bash
python app.py
```

## 常见问题解决

1. **CUDA版本不匹配**：
   - 如果您的显卡支持其他CUDA版本，请访问 [PyTorch官网](https://pytorch.org/) 获取适合您系统的安装命令

2. **内存不足**：
   - CLIP模型需要一定的内存，如果出现内存错误，请确保系统有足够的可用内存

3. **首次运行速度慢**：
   - 首次运行时会下载CLIP模型，这可能需要一些时间，请耐心等待

## 卸载虚拟环境
如果需要清理环境：
```bash
# 先退出虚拟环境
deactivate

# 删除虚拟环境目录
rmdir /s venv
```